selectPayList=SELECT LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, (COST_PER_ORDER * LISTENERS) AS TOTAL_COST, 10 AS FEE, (COST_PER_ORDER * LISTENERS) * 0.9 AS PAYMENT_AMOUNT, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM FROM LESSON_ORDER O JOIN LESSON_SCHEDULE S ON (O.SCHEDULE_PK = S.SCHEDULE_PK) JOIN LESSON L ON (S.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (ARTIST_PK = MEMBER_PK) WHERE LESSON_ORDER_END < SYSDATE ORDER BY LESSON_ORDER_END
selectSettlementList=SELECT SETTLE_PK, SETTLE_FEE, TOTAL_PAY_GIVEN, STATUS, LESSON_ORDER_PK, ARTIST_PK FROM PAYMENT_SETTLEMENT
insertPayment=INSERT INTO PAYMENT_SETTLEMENT(SETTLE_PK, SETTLE_FEE, TOTAL_PAY_GIVEN, STATUS, LESSON_ORDER_PK, ARTIST_PK) VALUES (PAYMENT_SETTLEMENT_SEQ.NEXTVAL, 10, ?, 0, ?, ?)
selectPaySettlementList=SELECT SETTLE_PK, P.LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, (COST_PER_ORDER * LISTENERS) AS TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, P.STATUS, LESSON_NAME, LESSON_ORDER_END, L.LESSON_PK FROM PAYMENT_SETTLEMENT P JOIN LESSON_ORDER O ON (P.LESSON_ORDER_PK = O.LESSON_ORDER_PK) JOIN LESSON_SCHEDULE S ON (O.SCHEDULE_PK = S.SCHEDULE_PK) JOIN LESSON L ON (S.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.ARTIST_PK = M.MEMBER_PK) ORDER BY LESSON_ORDER_END DESC
getMyPayListCount=SELECT COUNT(*) FROM PAYMENT_SETTLEMENT WHERE ARTIST_PK = ?
selectMyPayListWithPaging=SELECT RNUM, SETTLE_PK, LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, STATUS, LESSON_NAME, LESSON_ORDER_END, LESSON_PK FROM(SELECT ROWNUM RNUM, SETTLE_PK, LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, STATUS, LESSON_NAME, LESSON_ORDER_END, LESSON_PK FROM(SELECT SETTLE_PK, P.LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, (COST_PER_ORDER * LISTENERS) AS TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, P.STATUS, LESSON_NAME, LESSON_ORDER_END, L.LESSON_PK FROM PAYMENT_SETTLEMENT P JOIN LESSON_ORDER O ON (P.LESSON_ORDER_PK = O.LESSON_ORDER_PK) JOIN LESSON_SCHEDULE S ON (O.SCHEDULE_PK = S.SCHEDULE_PK) JOIN LESSON L ON (S.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.ARTIST_PK = M.MEMBER_PK) WHERE MEMBER_PK = ? ORDER BY LESSON_ORDER_END DESC)) WHERE RNUM BETWEEN ? AND ?
selectOneCalculation=SELECT SETTLE_PK, P.LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, (COST_PER_ORDER * LISTENERS) AS TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, STATUS, LESSON_NAME, LESSON_ORDER_END, L.LESSON_PK FROM PAYMENT_SETTLEMENT P JOIN LESSON_ORDER O ON (P.LESSON_ORDER_PK = O.LESSON_ORDER_PK) JOIN LESSON_SCHEDULE S ON (O.SCHEDULE_PK = S.SCHEDULE_PK) JOIN LESSON L ON (S.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.ARTIST_PK = M.MEMBER_PK) WHERE P.LESSON_ORDER_PK = ?
updateConfirmStatus=UPDATE PAYMENT_SETTLEMENT SET STATUS = 2 WHERE SETTLE_PK = ?
updateModifyStatus=UPDATE PAYMENT_SETTLEMENT SET STATUS = 1 WHERE SETTLE_PK = ?
insertSettlementReply=INSERT INTO SETTLEMENT_INQUIRY VALUES (SETTLEMENT_INQUIRY_SEQ.NEXTVAL, ?, ?, DEFAULT, DEFAULT, DEFAULT)
sortStatus=SELECT SETTLE_PK, P.LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, (COST_PER_ORDER * LISTENERS) AS TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, P.STATUS, LESSON_NAME, LESSON_ORDER_END, L.LESSON_PK FROM PAYMENT_SETTLEMENT P JOIN LESSON_ORDER O ON (P.LESSON_ORDER_PK = O.LESSON_ORDER_PK) JOIN LESSON_SCHEDULE S ON (O.SCHEDULE_PK = S.SCHEDULE_PK) JOIN LESSON L ON (S.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.ARTIST_PK = M.MEMBER_PK) ORDER BY CASE WHEN STATUS IN (?) THEN 0 ELSE 1 END, LESSON_ORDER_END DESC
selectSettlementInquiryList=SELECT INQUIRY_PK, S.SETTLEMENT_PK, CONTENT, LVL, S.ADMIN_PK, ADM_NAME,ORIGINAL_INQUIRY, ARTIST_PK, MEMBER_NAME FROM SETTLEMENT_INQUIRY S JOIN PAYMENT_SETTLEMENT P ON (S.SETTLEMENT_PK = P.SETTLE_PK) JOIN MEMBER M ON (ARTIST_PK = MEMBER_PK) LEFT JOIN ADMIN A ON (S.ADMIN_PK = A.ADM_PK) WHERE SETTLEMENT_PK = ?
selectOnePaySettlement=SELECT SETTLE_PK, P.LESSON_ORDER_PK, LESSON_ORDER_TIME, MEMBER_PK, MEMBER_ID, MEMBER_NAME, COST_PER_ORDER, LISTENERS, (COST_PER_ORDER * LISTENERS) AS TOTAL_COST, SETTLE_FEE, TOTAL_PAY_GIVEN, MEMBER_BANK_NAME, MEMBER_BANK_OWNER, MEMBER_BANK_NUM, STATUS, LESSON_NAME, LESSON_ORDER_END, L.LESSON_PK FROM PAYMENT_SETTLEMENT P JOIN LESSON_ORDER O ON (P.LESSON_ORDER_PK = O.LESSON_ORDER_PK) JOIN LESSON_SCHEDULE S ON (O.SCHEDULE_PK = S.SCHEDULE_PK) JOIN LESSON L ON (S.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.ARTIST_PK = M.MEMBER_PK) WHERE SETTLE_PK = ?
insertAdminReply=INSERT INTO SETTLEMENT_INQUIRY VALUES (SETTLEMENT_INQUIRY_SEQ.NEXTVAL, ?, ?, 1, ?, DEFAULT)
updateReplyStatus=UPDATE PAYMENT_SETTLEMENT SET STATUS = 4 WHERE SETTLE_PK = ?